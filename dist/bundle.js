(()=>{"use strict";let e=[{id:0,name:"cветлана",text:"Я, конечно, понимаю, что вам надо деньги зарабатывать, но нельзя же писать про шампуни!",stamp:1678183657e3,likedBy:["Skyler White","Saul Goodman","Jessie"]},{id:1,name:"Игорь",text:"А что такого? Нормальный шампунь. Моя собака не жаловалась.",stamp:1678270057e3,likedBy:["Mike Ermantraut","Heisenberg","Tuco","Gus Fring"]},{id:2,name:"cветлана",text:"Не знаю, юмор это или нет, мне всё равно! Так впаривать эту дрянь - возмутительно!",stamp:1678288057e3,likedBy:["Skyler White","Hector"]},{id:3,name:"raygan228",text:"Кто-то тратит деньги на рекламу, а кого-то клиенты находят сами.",stamp:1678356589e3,likedBy:["Hank Schrader"]}];if(localStorage.getItem("comments")){let t=JSON.parse(localStorage.getItem("comments"));e=t,console.log(t,e)}else e=[];function t(e,t,o=""){return e.classList.add(t),e.textContent=o,function(e,t){e.append(t)}}function o(e){let t=new Date(e),o=864e5;return Date.now()-e<o?"Сегодня, "+t.toLocaleTimeString(["ru-RU"],{hour:"2-digit",minute:"2-digit"}):Date.now()-e>o&&Date.now()-e<1728e5?"Вчера, "+t.toLocaleTimeString(["ru-RU"],{hour:"2-digit",minute:"2-digit"}):[t.toLocaleTimeString(["ru-RU"],{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]}setTimeout((()=>function(e){if(e&&e.length){let t=JSON.stringify(e);localStorage.setItem("comments",t)}else localStorage.clear()}(e)),300),setTimeout((()=>{(function(){if(document.querySelector(".comments__loading").remove(),localStorage.getItem("comments")){let e=JSON.parse(localStorage.getItem("comments"));!function(e){document.querySelector(".list__header").textContent="Комментарии ["+e.length+"]"}(e),function(e){let n=document.querySelector(".comments__list");for(let l of e){let e=document.createElement("li");t(e,"list__item")(n,e);let m=document.createElement("div");t(m,"item__name",l.name)(e,m);let i=document.createElement("div");t(i,"item__text",l.text)(e,i);let c=document.createElement("div");t(c,"item__info")(e,c);let a=document.createElement("div");t(a,"info__date",`${o(l.stamp)}`)(c,a);let r=document.createElement("div");t(r,"info__buttons")(c,r);let s=document.createElement("button");t(s,"buttons__like")(r,s);let d=document.createElement("span");t(d,"info__likes",l.likedBy.length)(r,d);let u=document.createElement("button");u.commentId=l.id,t(u,"buttons__delete")(r,u)}}(e)}else!function(){let e=document.querySelector(".comments__list"),o=document.createElement("h1");t(o,"comments__error","Нет комментариев. Будьте первым, кто оставит комментарий.")(e,o)}()})(),document.querySelectorAll(".buttons__delete").forEach((e=>{e.addEventListener("click",(()=>function(e){let t=JSON.parse(localStorage.getItem("comments"));t=t.filter((t=>t.id!==e)),localStorage.setItem("comments",JSON.stringify(t)),window.location.reload()}(e.commentId)))})),document.querySelector(".form__submit").addEventListener("click",(()=>function(){if(localStorage.getItem("comments")){let t=JSON.parse(localStorage.getItem("comments"));t.push({id:e.length+1,name:"Евгений",text:"Работает!",stamp:Date.now(),likedBy:["Skyler White","Saul Goodman","Jessie"]}),localStorage.setItem("comments",JSON.stringify(t)),window.location.reload()}else{localStorage.setItem("comments","[]");let t=JSON.parse(localStorage.getItem("comments"));console.log(t),t.push({id:e.length+1,name:"Евгений",text:"Работает!",stamp:Date.now(),likedBy:["Skyler White","Saul Goodman","Jessie"]}),localStorage.setItem("comments",JSON.stringify(t)),window.location.reload()}}())),console.log(e)}),600),function(){let e=document.querySelector(".comments__list"),t=document.createElement("h1");t.classList.add("comments__loading"),t.textContent="Загрузка комментариев...",e.append(t)}()})();