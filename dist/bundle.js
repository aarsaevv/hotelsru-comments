(()=>{"use strict";let e=[{id:1677853903e3,name:"cветлана",text:"Я, конечно, понимаю, что вам надо деньги зарабатывать, но нельзя же писать про шампуни!",stamp:1677853903e3,likedBy:["Skyler White","Saul Goodman","Jessie"]},{id:1678190743e3,name:"Игорь",text:"А что такого? Нормальный шампунь. Моя собака не жаловалась.",stamp:1678190743e3,likedBy:["Mike Ermantraut","Heisenberg","Tuco","Gus Fring"]},{id:1678255543e3,name:"cветлана",text:"Не знаю, юмор это или нет, мне всё равно! Так впаривать эту дрянь - возмутительно!",stamp:1678255543e3,likedBy:["Skyler White","Hector"]},{id:1678377943e3,name:"raygan228",text:"Кто-то тратит деньги на рекламу, а кого-то клиенты находят сами.",stamp:1678377943e3,likedBy:["Hank Schrader"]}];if(localStorage.getItem("comments")){let t=m(localStorage.getItem("comments"));e=t}else e=[];function t(e){document.querySelector(".list__header").textContent="Комментарии ["+e.length+"]"}function n(e,t,n=""){return e.classList.add(t),e.textContent=n,function(e,t){e.append(t)}}function o(e,o,r,u){let d=document.querySelector(".comments__list"),s=document.createElement("li");n(s,"list__item")(d,s);let _=document.createElement("div");n(_,"item__name",o.value)(s,_);let f=document.createElement("div");n(f,"item__text",r.value)(s,f);let g=document.createElement("div");n(g,"item__info")(s,g);let v=document.createElement("div");n(v,"info__date",u.valueAsNumber?c(a(u)):c(Date.now()))(g,v);let S=document.createElement("div");n(S,"info__buttons")(g,S);let E=document.createElement("button");n(E,"buttons__like")(S,E);let y=document.createElement("span");n(y,"info__likes",0)(S,y);let h=document.createElement("button");if(n(h,"buttons__delete")(S,h),localStorage.getItem("comments")){let e=m(localStorage.getItem("comments"));l(e,o,r,u),localStorage.setItem("comments",i(e)),t(e)}else{localStorage.setItem("comments","[]");let e=m(localStorage.getItem("comments"));l(e,o,r,u),localStorage.setItem("comments",i(e)),t(e)}}function l(e,t,n,o){let l=a(o);e.push({id:o.value?l:Date.now(),name:t.value,text:n.value,stamp:o.value?l:Date.now(),likedBy:[]})}function m(e){return JSON.parse(e)}function i(e){return JSON.stringify(e)}function c(e){let t=new Date(e),n=864e5;return Date.now()-e<n?"Сегодня, "+t.toLocaleTimeString(["ru-RU"],{hour:"2-digit",minute:"2-digit"}):Date.now()-e>n&&Date.now()-e<1728e5?"Вчера, "+t.toLocaleTimeString(["ru-RU"],{hour:"2-digit",minute:"2-digit"}):[t.toLocaleTimeString(["ru-RU"],{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]}function a(e){let t=new Date,n=36e5*t.getHours()+6e4*t.getMinutes();return e.valueAsNumber-216e5+n}setTimeout((()=>{!function(e){if(e&&e.length){let t=i(e);localStorage.setItem("comments",t)}else localStorage.clear()}(e)}),300),setTimeout((()=>{(function(){if(document.querySelector(".comments__loading").remove(),localStorage.getItem("comments")){let e=m(localStorage.getItem("comments"));t(e),function(e){let t=document.querySelector(".comments__list");for(let o of e){let e=document.createElement("li");e.commentId=o.stamp,n(e,"list__item")(t,e);let l=document.createElement("div");n(l,"item__name",o.name)(e,l);let m=document.createElement("div");n(m,"item__text",o.text)(e,m);let i=document.createElement("div");n(i,"item__info")(e,i);let a=document.createElement("div");n(a,"info__date",`${c(o.stamp)}`)(i,a);let r=document.createElement("div");n(r,"info__buttons")(i,r);let u=document.createElement("button");n(u,"buttons__like")(r,u);let d=document.createElement("span");n(d,"info__likes",o.likedBy.length)(r,d);let s=document.createElement("button");s.commentId=o.stamp,n(s,"buttons__delete")(r,s)}}(e)}})(),function(){let e=document.querySelector(".form__submit"),t=document.querySelector(".form__name"),n=document.querySelector(".form__text"),l=document.querySelector(".form__date");t.addEventListener("keydown",(e=>{if("Enter"===e.key){if(e.preventDefault(),!t.value)throw"Нет имени";if(!n.value)throw"Нет текста";o(0,t,n,l)}})),n.addEventListener("keydown",(e=>{if("Enter"===e.key){if(e.preventDefault(),!t.value)throw"Нет имени";if(!n.value)throw"Нет текста";o(0,t,n,l)}})),l.addEventListener("keydown",(e=>{if("Enter"===e.key){if(!t.value)throw"Нет имени";if(!n.value)throw"Нет текста";o(0,t,n,l)}})),e.addEventListener("click",(()=>{if(!t.value)throw"Нет имени";if(!n.value)throw"Нет текста";o(0,t,n,l)}))}()}),600),setTimeout((()=>{!function(){let e=document.querySelectorAll(".list__item");document.querySelectorAll(".buttons__delete").forEach((t=>{t.addEventListener("click",(()=>{e.forEach((e=>{e.addEventListener("click",(()=>{e.remove()}))})),function(e){let t=m(localStorage.getItem("comments"));t=t.filter((t=>t.id!==e)),localStorage.setItem("comments",i(t))}(t.commentId)}))}))}()}),900),function(){let e=document.querySelector(".comments__list"),t=document.createElement("h1");t.classList.add("comments__loading"),t.textContent="Загрузка комментариев...",e.append(t)}()})();