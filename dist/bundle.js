(()=>{"use strict";const e=(e,t,n="")=>(e.classList.add(t),e.textContent=n,function(e,t){e.append(t)}),t=e=>JSON.stringify(e),n=e=>JSON.parse(e),o=e=>{let t=new Date(e);const n=864e5;return Date.now()-e<n?"Сегодня, "+t.toLocaleTimeString(["ru-RU"],{hour:"2-digit",minute:"2-digit"}):Date.now()-e>n&&Date.now()-e<1728e5?"Вчера, "+t.toLocaleTimeString(["ru-RU"],{hour:"2-digit",minute:"2-digit"}):[t.toLocaleTimeString(["ru-RU"],{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]},l=e=>{let t=new Date,n=36e5*t.getHours()+6e4*t.getMinutes();return e.valueAsNumber-216e5+n};let m=[{id:1677853903e3,name:"cветлана",text:"Я, конечно, понимаю, что вам надо деньги зарабатывать, но нельзя же писать про шампуни!",stamp:1677853903e3,likedBy:["Skyler White","Saul Goodman","Jessie"]},{id:1678190743e3,name:"Игорь",text:"А что такого? Нормальный шампунь. Моя собака не жаловалась.",stamp:1678190743e3,likedBy:["Mike Ermantraut","Heisenberg","Tuco","Gus Fring"]},{id:1678255543e3,name:"cветлана",text:"Не знаю, юмор это или нет, мне всё равно! Так впаривать эту дрянь - возмутительно!",stamp:1678255543e3,likedBy:["Skyler White","Hector"]},{id:1678377943e3,name:"raygan228",text:"Кто-то тратит деньги на рекламу, а кого-то клиенты находят сами.",stamp:1678377943e3,likedBy:["Hank Schrader"]}];function a(e,t,n,o){let m=l(o);e.push({id:o.value?m:Date.now(),name:t.value,text:n.value,stamp:o.value?m:Date.now(),likedBy:[]})}function i(m,i,r){let u=document.createElement("li");e(u,"list__item")(c,u);let d=document.createElement("div");e(d,"item__name",m.value)(u,d);let s=document.createElement("div");e(s,"item__text",i.value)(u,s);let _=document.createElement("div");e(_,"item__info")(u,_);let g=document.createElement("div");e(g,"info__date",r.valueAsNumber?o(l(r)):o(Date.now()))(_,g);let f=document.createElement("div");e(f,"info__buttons")(_,f);let v=document.createElement("button");e(v,"buttons__like")(f,v);let E=document.createElement("span");e(E,"info__likes",0)(f,E);let S=document.createElement("button");if(e(S,"buttons__delete")(f,S),localStorage.getItem("comments")){let e=n(localStorage.getItem("comments"));a(e,m,i,r),localStorage.setItem("comments",t(e))}else{localStorage.setItem("comments","[]");let e=n(localStorage.getItem("comments"));a(e,m,i,r),localStorage.setItem("comments",t(e))}}let c=document.querySelector(".comments__list");if(function(){let t=document.createElement("h1");e(t,"comments__loading","Загрузка комментариев...")(c,t)}(),setTimeout((()=>{!function(e){if(e&&e.length){let n=t(e);localStorage.setItem("comments",n)}else localStorage.clear()}(m)}),300),setTimeout((()=>{document.querySelector(".comments__loading").remove(),localStorage.getItem("comments")&&function(t){for(let n of t){let t=document.createElement("li");t.commentId=n.stamp,e(t,"list__item")(c,t);let l=document.createElement("div");e(l,"item__name",n.name)(t,l);let m=document.createElement("div");e(m,"item__text",n.text)(t,m);let a=document.createElement("div");e(a,"item__info")(t,a);let i=document.createElement("div");e(i,"info__date",`${o(n.stamp)}`)(a,i);let r=document.createElement("div");e(r,"info__buttons")(a,r);let u=document.createElement("button");u.commentId=n.stamp,e(u,"buttons__like")(r,u);let d=document.createElement("span");e(d,"info__likes",n.likedBy.length)(r,d);let s=document.createElement("button");s.commentId=n.stamp,e(s,"buttons__delete")(r,s)}}(n(localStorage.getItem("comments"))),function(){let e=document.querySelector(".form__submit"),t=document.querySelector(".form__name"),n=document.querySelector(".form__text"),o=document.querySelector(".form__date");t.addEventListener("keydown",(e=>{if("Enter"===e.key){if(e.preventDefault(),t.value.length<4)throw"Введите имя длиной не менее 4 символов.";if(n.value.length<4)throw"Введите текст длиной не менее 4 символов.";i(t,n,o)}})),n.addEventListener("keydown",(e=>{if("Enter"===e.key){if(e.preventDefault(),t.value.length<4)throw"Введите имя длиной не менее 4 символов.";if(n.value.length<4)throw"Введите текст длиной не менее 4 символов.";i(t,n,o)}})),o.addEventListener("keydown",(e=>{if("Enter"===e.key){if(!t.value)throw"Нет имени";if(!n.value)throw"Нет текста";i(t,n,o)}})),e.addEventListener("click",(()=>{if(!t.value)throw"Нет имени";if(!n.value)throw"Нет текста";i(t,n,o)}))}(),function(){let e=document.querySelectorAll(".list__item");document.querySelectorAll(".buttons__delete").forEach((o=>{o.addEventListener("click",(()=>{e.forEach((e=>{e.addEventListener("click",(()=>{e.remove()}))})),function(e){let o=n(localStorage.getItem("comments"));o=o.filter((t=>t.id!==e)),localStorage.setItem("comments",t(o))}(o.commentId)}))}))}()}),600),localStorage.getItem("comments")){let e=n(localStorage.getItem("comments"));m=e}else m=[]})();